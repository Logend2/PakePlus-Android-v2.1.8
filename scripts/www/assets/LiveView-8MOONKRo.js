import{d as O,u as ke,o as y,c as x,a as v,F as Y,r as J,n as L,b as A,t as H,e as Se,_ as re,f as C,g as _,C as rt,w as q,h as ot,i as X,j as Ce,k as W,l as F,m as ee,p as D,q as it,s as Me,v as Ee,D as ie}from"./index-6SxiNpGX.js";import{r as me,G as te}from"./colorUtils-DrtxhOgE.js";const st={class:"zone-matrix h-full"},at={class:"grid grid-cols-2 gap-2 auto-rows-fr h-full"},lt=["onClick"],ct={class:"flex-1 flex justify-between items-center pl-3"},ut={key:0,class:"w-1.5 h-1.5 rounded-full bg-purple shadow-[0_0_6px_#D500F9]"},dt=O({__name:"ZoneMatrix",setup(t){const n=ke();function r(i){n.toggleZone(i)}function e(i){return n.selectedZones.has(i)}function o(i){const s=n.channels[i];return s.r===0&&s.g===0&&s.b===0?"#333":me(s.r,s.g,s.b)}return(i,s)=>(y(),x("div",st,[v("div",at,[(y(),x(Y,null,J(10,a=>v("button",{key:a-1,class:L(["zone-button relative rounded border transition-all flex items-center px-3 overflow-hidden group",[e(a-1)?"border-purple bg-purple/15 shadow-[inset_0_0_15px_rgba(213,0,249,0.15)]":"border-gray-700 bg-gray-800/30 hover:bg-gray-700/50 hover:border-gray-600"]]),onClick:c=>r(a-1)},[v("div",{class:"absolute left-0 top-0 bottom-0 w-1 transition-colors rounded-l",style:A({backgroundColor:o(a-1)})},null,4),v("div",ct,[v("span",{class:L(["font-mono text-sm font-medium",e(a-1)?"text-white":"text-gray-400"])}," Z"+H(a-1),3),e(a-1)?(y(),x("div",ut)):Se("",!0)])],10,lt)),64))])]))}}),ht=re(dt,[["__scopeId","data-v-4bb13b72"]]),ft={class:"zone-quick-select flex flex-wrap gap-2"},vt=O({__name:"ZoneQuickSelect",setup(t){const n=ke(),r=[{label:"ALL",action:"all"},{label:"ODD",action:"odd"},{label:"EVEN",action:"even"},{label:"INV",action:"invert"},{label:"CLR",action:"clear"}];function e(o){n.applySelection(o)}return(o,i)=>(y(),x("div",ft,[(y(),x(Y,null,J(r,s=>C(_(rt),{key:s.action,size:"sm",variant:s.action==="clear"?"red":"default",onClick:a=>e(s.action)},{default:q(()=>[ot(H(s.label),1)]),_:2},1032,["variant","onClick"])),64))]))}});function ue(){const t=ke(),n=X(),r=F(!1),e=F(0),o=F(!1),i=33;let s=null;async function a(){if(r.value){o.value=!0;return}const g=performance.now()-e.value;if(g<i){s||(s=setTimeout(()=>{s=null,a()},i-g));return}r.value=!0,o.value=!1;try{e.value=performance.now(),await W.sendStream(t.channels)}catch(b){console.error("Failed to send stream:",b)}finally{r.value=!1,o.value&&(o.value=!1,a())}}async function c(h=0){try{await W.sendPulse(h)}catch(g){console.error("Failed to send pulse:",g)}}async function u(h){try{const g=t.zoneMask,b=n.cmdBlinkMode;await W.sendPreset(g,b,h)}catch(g){console.error("Failed to send zone preset:",g)}}async function d(h){try{await W.sendAllZonesColor(h)}catch(g){console.error("Failed to send all zones color:",g)}}async function l(){try{await W.blackout()}catch(h){console.error("Failed to send blackout:",h)}}function f(){s&&(clearTimeout(s),s=null)}return Ce(f),{isSending:r,sendStream:a,sendPulse:c,sendZonePreset:u,sendAllZonesColor:d,blackout:l,cleanup:f}}function gt(){const t=ee(),n=F(!1),r=F(0),e=F(!1),o=1500;let i=0,s=null;const a=D(()=>t.isConnected);function c(){!a.value||n.value||(n.value=!0,i=performance.now(),d())}function u(){s!==null&&(cancelAnimationFrame(s),s=null),n.value=!1,r.value=0}function d(){if(!n.value)return;const h=performance.now()-i;if(r.value=Math.min(1,h/o),r.value>=1){l();return}s=requestAnimationFrame(d)}async function l(){try{e.value=!0;for(let h=0;h<10;h++)W.sendUnlock().catch(g=>console.error("Unlock error:",g)),await new Promise(g=>setTimeout(g,100));setTimeout(()=>{e.value=!1},2e3)}catch(h){console.error("Failed to complete unlock sequence:",h)}finally{u()}}function f(){s!==null&&cancelAnimationFrame(s)}return Ce(f),{isHolding:n,progress:r,isUnlocked:e,canUnlock:a,startUnlock:c,stopUnlock:u}}/*!
 * iro.js v5.5.2
 * 2016-2021 James Daniel
 * Licensed under MPL 2.0
 * github.com/jaames/iro.js
 */var S,ae,Le,pe,Ue,B={},$e=[],_t=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function N(t,n){for(var r in n)t[r]=n[r];return t}function We(t){var n=t.parentNode;n&&n.removeChild(t)}function m(t,n,r){var e,o,i,s,a=arguments;if(n=N({},n),arguments.length>3)for(r=[r],e=3;e<arguments.length;e++)r.push(a[e]);if(r!=null&&(n.children=r),t!=null&&t.defaultProps!=null)for(o in t.defaultProps)n[o]===void 0&&(n[o]=t.defaultProps[o]);return s=n.key,(i=n.ref)!=null&&delete n.ref,s!=null&&delete n.key,ye(t,n,s,i)}function ye(t,n,r,e){var o={type:t,props:n,key:r,ref:e,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return S.vnode&&S.vnode(o),o}function de(t){return t.children}function bt(t){if(t==null||typeof t=="boolean")return null;if(typeof t=="string"||typeof t=="number")return ye(null,t,null,null);if(t.__e!=null||t.__c!=null){var n=ye(t.type,t.props,t.key,null);return n.__e=t.__e,n}return t}function Q(t,n){this.props=t,this.context=n}function le(t,n){if(n==null)return t.__p?le(t.__p,t.__p.__k.indexOf(t)+1):null;for(var r;n<t.__k.length;n++)if((r=t.__k[n])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?le(t):null}function ze(t){var n,r;if((t=t.__p)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,n=0;n<t.__k.length;n++)if((r=t.__k[n])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return ze(t)}}function ge(t){(!t.__d&&(t.__d=!0)&&ae.push(t)===1||pe!==S.debounceRendering)&&(pe=S.debounceRendering,(S.debounceRendering||Le)(mt))}function mt(){var t,n,r,e,o,i,s,a;for(ae.sort(function(c,u){return u.__v.__b-c.__v.__b});t=ae.pop();)t.__d&&(r=void 0,e=void 0,i=(o=(n=t).__v).__e,s=n.__P,a=n.u,n.u=!1,s&&(r=[],e=Re(s,o,N({},o),n.__n,s.ownerSVGElement!==void 0,null,r,a,i??le(o)),Ge(r,o),e!=i&&ze(o)))}function je(t,n,r,e,o,i,s,a,c){var u,d,l,f,h,g,b,w=r&&r.__k||$e,k=w.length;if(a==B&&(a=i!=null?i[0]:k?le(r,0):null),u=0,n.__k=Ie(n.__k,function(p){if(p!=null){if(p.__p=n,p.__b=n.__b+1,(l=w[u])===null||l&&p.key==l.key&&p.type===l.type)w[u]=void 0;else for(d=0;d<k;d++){if((l=w[d])&&p.key==l.key&&p.type===l.type){w[d]=void 0;break}l=null}if(f=Re(t,p,l=l||B,e,o,i,s,null,a,c),(d=p.ref)&&l.ref!=d&&(b||(b=[])).push(d,p.__c||f,p),f!=null){if(g==null&&(g=f),p.l!=null)f=p.l,p.l=null;else if(i==l||f!=a||f.parentNode==null){e:if(a==null||a.parentNode!==t)t.appendChild(f);else{for(h=a,d=0;(h=h.nextSibling)&&d<k;d+=2)if(h==f)break e;t.insertBefore(f,a)}n.type=="option"&&(t.value="")}a=f.nextSibling,typeof n.type=="function"&&(n.l=f)}}return u++,p}),n.__e=g,i!=null&&typeof n.type!="function")for(u=i.length;u--;)i[u]!=null&&We(i[u]);for(u=k;u--;)w[u]!=null&&Xe(w[u],w[u]);if(b)for(u=0;u<b.length;u++)Ve(b[u],b[++u],b[++u])}function Ie(t,n,r){if(r==null&&(r=[]),t==null||typeof t=="boolean")n&&r.push(n(null));else if(Array.isArray(t))for(var e=0;e<t.length;e++)Ie(t[e],n,r);else r.push(n?n(bt(t)):t);return r}function pt(t,n,r,e,o){var i;for(i in r)i in n||Oe(t,i,null,r[i],e);for(i in n)o&&typeof n[i]!="function"||i==="value"||i==="checked"||r[i]===n[i]||Oe(t,i,n[i],r[i],e)}function Fe(t,n,r){n[0]==="-"?t.setProperty(n,r):t[n]=typeof r=="number"&&_t.test(n)===!1?r+"px":r??""}function Oe(t,n,r,e,o){var i,s,a,c,u;if(!((n=o?n==="className"?"class":n:n==="class"?"className":n)==="key"||n==="children"))if(n==="style")if(i=t.style,typeof r=="string")i.cssText=r;else{if(typeof e=="string"&&(i.cssText="",e=null),e)for(s in e)r&&s in r||Fe(i,s,"");if(r)for(a in r)e&&r[a]===e[a]||Fe(i,a,r[a])}else n[0]==="o"&&n[1]==="n"?(c=n!==(n=n.replace(/Capture$/,"")),u=n.toLowerCase(),n=(u in t?u:n).slice(2),r?(e||t.addEventListener(n,He,c),(t.t||(t.t={}))[n]=r):t.removeEventListener(n,He,c)):n!=="list"&&n!=="tagName"&&n!=="form"&&!o&&n in t?t[n]=r??"":typeof r!="function"&&n!=="dangerouslySetInnerHTML"&&(n!==(n=n.replace(/^xlink:?/,""))?r==null||r===!1?t.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),r):r==null||r===!1?t.removeAttribute(n):t.setAttribute(n,r))}function He(t){return this.t[t.type](S.event?S.event(t):t)}function Re(t,n,r,e,o,i,s,a,c,u){var d,l,f,h,g,b,w,k,p,M,T=n.type;if(n.constructor!==void 0)return null;(d=S.__b)&&d(n);try{e:if(typeof T=="function"){if(k=n.props,p=(d=T.contextType)&&e[d.__c],M=d?p?p.props.value:d.__p:e,r.__c?w=(l=n.__c=r.__c).__p=l.__E:("prototype"in T&&T.prototype.render?n.__c=l=new T(k,M):(n.__c=l=new Q(k,M),l.constructor=T,l.render=xt),p&&p.sub(l),l.props=k,l.state||(l.state={}),l.context=M,l.__n=e,f=l.__d=!0,l.__h=[]),l.__s==null&&(l.__s=l.state),T.getDerivedStateFromProps!=null&&N(l.__s==l.state?l.__s=N({},l.__s):l.__s,T.getDerivedStateFromProps(k,l.__s)),f)T.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&s.push(l);else{if(T.getDerivedStateFromProps==null&&a==null&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(k,M),!a&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(k,l.__s,M)===!1){for(l.props=k,l.state=l.__s,l.__d=!1,l.__v=n,n.__e=c!=null?c!==r.__e?c:r.__e:null,n.__k=r.__k,d=0;d<n.__k.length;d++)n.__k[d]&&(n.__k[d].__p=n);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(k,l.__s,M)}for(h=l.props,g=l.state,l.context=M,l.props=k,l.state=l.__s,(d=S.__r)&&d(n),l.__d=!1,l.__v=n,l.__P=t,d=l.render(l.props,l.state,l.context),n.__k=Ie(d!=null&&d.type==de&&d.key==null?d.props.children:d),l.getChildContext!=null&&(e=N(N({},e),l.getChildContext())),f||l.getSnapshotBeforeUpdate==null||(b=l.getSnapshotBeforeUpdate(h,g)),je(t,n,r,e,o,i,s,c,u),l.base=n.__e;d=l.__h.pop();)l.__s&&(l.state=l.__s),d.call(l);f||h==null||l.componentDidUpdate==null||l.componentDidUpdate(h,g,b),w&&(l.__E=l.__p=null)}else n.__e=yt(r.__e,n,r,e,o,i,s,u);(d=S.diffed)&&d(n)}catch(oe){S.__e(oe,n,r)}return n.__e}function Ge(t,n){for(var r;r=t.pop();)try{r.componentDidMount()}catch(e){S.__e(e,r.__v)}S.__c&&S.__c(n)}function yt(t,n,r,e,o,i,s,a){var c,u,d,l,f=r.props,h=n.props;if(o=n.type==="svg"||o,t==null&&i!=null){for(c=0;c<i.length;c++)if((u=i[c])!=null&&(n.type===null?u.nodeType===3:u.localName===n.type)){t=u,i[c]=null;break}}if(t==null){if(n.type===null)return document.createTextNode(h);t=o?document.createElementNS("http://www.w3.org/2000/svg",n.type):document.createElement(n.type),i=null}return n.type===null?f!==h&&(i!=null&&(i[i.indexOf(t)]=null),t.data=h):n!==r&&(i!=null&&(i=$e.slice.call(t.childNodes)),d=(f=r.props||B).dangerouslySetInnerHTML,l=h.dangerouslySetInnerHTML,a||(l||d)&&(l&&d&&l.__html==d.__html||(t.innerHTML=l&&l.__html||"")),pt(t,h,f,o,a),n.__k=n.props.children,l||je(t,n,r,e,n.type!=="foreignObject"&&o,i,s,B,a),a||("value"in h&&h.value!==void 0&&h.value!==t.value&&(t.value=h.value==null?"":h.value),"checked"in h&&h.checked!==void 0&&h.checked!==t.checked&&(t.checked=h.checked))),t}function Ve(t,n,r){try{typeof t=="function"?t(n):t.current=n}catch(e){S.__e(e,r)}}function Xe(t,n,r){var e,o,i;if(S.unmount&&S.unmount(t),(e=t.ref)&&Ve(e,null,n),r||typeof t.type=="function"||(r=(o=t.__e)!=null),t.__e=t.l=null,(e=t.__c)!=null){if(e.componentWillUnmount)try{e.componentWillUnmount()}catch(s){S.__e(s,n)}e.base=e.__P=null}if(e=t.__k)for(i=0;i<e.length;i++)e[i]&&Xe(e[i],n,r);o!=null&&We(o)}function xt(t,n,r){return this.constructor(t,r)}function wt(t,n,r){var e,o,i;S.__p&&S.__p(t,n),o=(e=r===Ue)?null:n.__k,t=m(de,null,[t]),i=[],Re(n,n.__k=t,o||B,B,n.ownerSVGElement!==void 0,o?null:$e.slice.call(n.childNodes),i,!1,B,e),Ge(i,t)}S={},Q.prototype.setState=function(t,n){var r=this.__s!==this.state&&this.__s||(this.__s=N({},this.state));(typeof t!="function"||(t=t(r,this.props)))&&N(r,t),t!=null&&this.__v&&(this.u=!1,n&&this.__h.push(n),ge(this))},Q.prototype.forceUpdate=function(t){this.__v&&(t&&this.__h.push(t),this.u=!0,ge(this))},Q.prototype.render=de,ae=[],Le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,pe=S.debounceRendering,S.__e=function(t,n,r){for(var e;n=n.__p;)if((e=n.__c)&&!e.__p)try{if(e.constructor&&e.constructor.getDerivedStateFromError!=null)e.setState(e.constructor.getDerivedStateFromError(t));else{if(e.componentDidCatch==null)continue;e.componentDidCatch(t)}return ge(e.__E=e)}catch(o){t=o}throw t},Ue=B;function kt(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function St(t,n,r){return n&&kt(t.prototype,n),t}function R(){return R=Object.assign||function(t){for(var n=arguments,r=1;r<arguments.length;r++){var e=n[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},R.apply(this,arguments)}var Ct="[-\\+]?\\d+%?",Et="[-\\+]?\\d*\\.\\d+%?",z="(?:"+Et+")|(?:"+Ct+")",Ze="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",qe="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",$t=new RegExp("rgb"+Ze),It=new RegExp("rgba"+qe),Rt=new RegExp("hsl"+Ze),Tt=new RegExp("hsla"+qe),he="^(?:#?|0x?)",j="([0-9a-fA-F]{1})",G="([0-9a-fA-F]{2})",Pt=new RegExp(he+j+j+j+"$"),At=new RegExp(he+j+j+j+j+"$"),Mt=new RegExp(he+G+G+G+"$"),Ft=new RegExp(he+G+G+G+G+"$"),Ot=2e3,Ht=4e4,se=Math.log,Z=Math.round,ne=Math.floor;function P(t,n,r){return Math.min(Math.max(t,n),r)}function $(t,n){var r=t.indexOf("%")>-1,e=parseFloat(t);return r?n/100*e:e}function I(t){return parseInt(t,16)}function U(t){return t.toString(16).padStart(2,"0")}var K=function(){function t(r,e){this.$={h:0,s:0,v:0,a:1},r&&this.set(r),this.onChange=e,this.initialValue=R({},this.$)}var n=t.prototype;return n.set=function(e){if(typeof e=="string")/^(?:#?|0x?)[0-9a-fA-F]{3,8}$/.test(e)?this.hexString=e:/^rgba?/.test(e)?this.rgbString=e:/^hsla?/.test(e)&&(this.hslString=e);else if(typeof e=="object")e instanceof t?this.hsva=e.hsva:"r"in e&&"g"in e&&"b"in e?this.rgb=e:"h"in e&&"s"in e&&"v"in e?this.hsv=e:"h"in e&&"s"in e&&"l"in e?this.hsl=e:"kelvin"in e&&(this.kelvin=e.kelvin);else throw new Error("Invalid color value")},n.setChannel=function(e,o,i){var s;this[e]=R({},this[e],(s={},s[o]=i,s))},n.reset=function(){this.hsva=this.initialValue},n.clone=function(){return new t(this)},n.unbind=function(){this.onChange=void 0},t.hsvToRgb=function(e){var o=e.h/60,i=e.s/100,s=e.v/100,a=ne(o),c=o-a,u=s*(1-i),d=s*(1-c*i),l=s*(1-(1-c)*i),f=a%6,h=[s,d,u,u,l,s][f],g=[l,s,s,d,u,u][f],b=[u,u,l,s,s,d][f];return{r:P(h*255,0,255),g:P(g*255,0,255),b:P(b*255,0,255)}},t.rgbToHsv=function(e){var o=e.r/255,i=e.g/255,s=e.b/255,a=Math.max(o,i,s),c=Math.min(o,i,s),u=a-c,d=0,l=a,f=a===0?0:u/a;switch(a){case c:d=0;break;case o:d=(i-s)/u+(i<s?6:0);break;case i:d=(s-o)/u+2;break;case s:d=(o-i)/u+4;break}return{h:d*60%360,s:P(f*100,0,100),v:P(l*100,0,100)}},t.hsvToHsl=function(e){var o=e.s/100,i=e.v/100,s=(2-o)*i,a=s<=1?s:2-s,c=a<1e-9?0:o*i/a;return{h:e.h,s:P(c*100,0,100),l:P(s*50,0,100)}},t.hslToHsv=function(e){var o=e.l*2,i=e.s*(o<=100?o:200-o)/100,s=o+i<1e-9?0:2*i/(o+i);return{h:e.h,s:P(s*100,0,100),v:P((o+i)/2,0,100)}},t.kelvinToRgb=function(e){var o=e/100,i,s,a;return o<66?(i=255,s=-155.25485562709179-.44596950469579133*(s=o-2)+104.49216199393888*se(s),a=o<20?0:-254.76935184120902+.8274096064007395*(a=o-10)+115.67994401066147*se(a)):(i=351.97690566805693+.114206453784165*(i=o-55)-40.25366309332127*se(i),s=325.4494125711974+.07943456536662342*(s=o-50)-28.0852963507957*se(s),a=255),{r:P(ne(i),0,255),g:P(ne(s),0,255),b:P(ne(a),0,255)}},t.rgbToKelvin=function(e){for(var o=e.r,i=e.b,s=.4,a=Ot,c=Ht,u;c-a>s;){u=(c+a)*.5;var d=t.kelvinToRgb(u);d.b/d.r>=i/o?c=u:a=u}return u},St(t,[{key:"hsv",get:function(){var e=this.$;return{h:e.h,s:e.s,v:e.v}},set:function(e){var o=this.$;if(e=R({},o,e),this.onChange){var i={h:!1,v:!1,s:!1,a:!1};for(var s in o)i[s]=e[s]!=o[s];this.$=e,(i.h||i.s||i.v||i.a)&&this.onChange(this,i)}else this.$=e}},{key:"hsva",get:function(){return R({},this.$)},set:function(e){this.hsv=e}},{key:"hue",get:function(){return this.$.h},set:function(e){this.hsv={h:e}}},{key:"saturation",get:function(){return this.$.s},set:function(e){this.hsv={s:e}}},{key:"value",get:function(){return this.$.v},set:function(e){this.hsv={v:e}}},{key:"alpha",get:function(){return this.$.a},set:function(e){this.hsv=R({},this.hsv,{a:e})}},{key:"kelvin",get:function(){return t.rgbToKelvin(this.rgb)},set:function(e){this.rgb=t.kelvinToRgb(e)}},{key:"red",get:function(){var e=this.rgb;return e.r},set:function(e){this.rgb=R({},this.rgb,{r:e})}},{key:"green",get:function(){var e=this.rgb;return e.g},set:function(e){this.rgb=R({},this.rgb,{g:e})}},{key:"blue",get:function(){var e=this.rgb;return e.b},set:function(e){this.rgb=R({},this.rgb,{b:e})}},{key:"rgb",get:function(){var e=t.hsvToRgb(this.$),o=e.r,i=e.g,s=e.b;return{r:Z(o),g:Z(i),b:Z(s)}},set:function(e){this.hsv=R({},t.rgbToHsv(e),{a:e.a===void 0?1:e.a})}},{key:"rgba",get:function(){return R({},this.rgb,{a:this.alpha})},set:function(e){this.rgb=e}},{key:"hsl",get:function(){var e=t.hsvToHsl(this.$),o=e.h,i=e.s,s=e.l;return{h:Z(o),s:Z(i),l:Z(s)}},set:function(e){this.hsv=R({},t.hslToHsv(e),{a:e.a===void 0?1:e.a})}},{key:"hsla",get:function(){return R({},this.hsl,{a:this.alpha})},set:function(e){this.hsl=e}},{key:"rgbString",get:function(){var e=this.rgb;return"rgb("+e.r+", "+e.g+", "+e.b+")"},set:function(e){var o,i,s,a,c=1;if((o=$t.exec(e))?(i=$(o[1],255),s=$(o[2],255),a=$(o[3],255)):(o=It.exec(e))&&(i=$(o[1],255),s=$(o[2],255),a=$(o[3],255),c=$(o[4],1)),o)this.rgb={r:i,g:s,b:a,a:c};else throw new Error("Invalid rgb string")}},{key:"rgbaString",get:function(){var e=this.rgba;return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},set:function(e){this.rgbString=e}},{key:"hexString",get:function(){var e=this.rgb;return"#"+U(e.r)+U(e.g)+U(e.b)},set:function(e){var o,i,s,a,c=255;if((o=Pt.exec(e))?(i=I(o[1])*17,s=I(o[2])*17,a=I(o[3])*17):(o=At.exec(e))?(i=I(o[1])*17,s=I(o[2])*17,a=I(o[3])*17,c=I(o[4])*17):(o=Mt.exec(e))?(i=I(o[1]),s=I(o[2]),a=I(o[3])):(o=Ft.exec(e))&&(i=I(o[1]),s=I(o[2]),a=I(o[3]),c=I(o[4])),o)this.rgb={r:i,g:s,b:a,a:c/255};else throw new Error("Invalid hex string")}},{key:"hex8String",get:function(){var e=this.rgba;return"#"+U(e.r)+U(e.g)+U(e.b)+U(ne(e.a*255))},set:function(e){this.hexString=e}},{key:"hslString",get:function(){var e=this.hsl;return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},set:function(e){var o,i,s,a,c=1;if((o=Rt.exec(e))?(i=$(o[1],360),s=$(o[2],100),a=$(o[3],100)):(o=Tt.exec(e))&&(i=$(o[1],360),s=$(o[2],100),a=$(o[3],100),c=$(o[4],1)),o)this.hsl={h:i,s,l:a,a:c};else throw new Error("Invalid hsl string")}},{key:"hslaString",get:function(){var e=this.hsla;return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},set:function(e){this.hslString=e}}]),t}(),Nt={sliderShape:"bar",sliderType:"value",minTemperature:2200,maxTemperature:11e3};function Te(t){var n,r=t.width,e=t.sliderSize,o=t.borderWidth,i=t.handleRadius,s=t.padding,a=t.sliderShape,c=t.layoutDirection==="horizontal";return e=(n=e)!=null?n:s*2+i*2,a==="circle"?{handleStart:t.padding+t.handleRadius,handleRange:r-s*2-i*2,width:r,height:r,cx:r/2,cy:r/2,radius:r/2-o/2}:{handleStart:e/2,handleRange:r-e,radius:e/2,x:0,y:0,width:c?e:r,height:c?r:e}}function Dt(t,n){var r=n.hsva,e=n.rgb;switch(t.sliderType){case"red":return e.r/2.55;case"green":return e.g/2.55;case"blue":return e.b/2.55;case"alpha":return r.a*100;case"kelvin":var o=t.minTemperature,i=t.maxTemperature,s=i-o,a=(n.kelvin-o)/s*100;return Math.max(0,Math.min(a,100));case"hue":return r.h/=3.6;case"saturation":return r.s;case"value":default:return r.v}}function Bt(t,n,r){var e=Te(t),o=e.handleRange,i=e.handleStart,s;t.layoutDirection==="horizontal"?s=-1*r+o+i:s=n-i,s=Math.max(Math.min(s,o),0);var a=Math.round(100/o*s);switch(t.sliderType){case"kelvin":var c=t.minTemperature,u=t.maxTemperature,d=u-c;return c+d*(a/100);case"alpha":return a/100;case"hue":return a*3.6;case"red":case"blue":case"green":return a*2.55;default:return a}}function Lt(t,n){var r=Te(t),e=r.width,o=r.height,i=r.handleRange,s=r.handleStart,a=t.layoutDirection==="horizontal",c=Dt(t,n),u=a?e/2:o/2,d=s+c/100*i;return a&&(d=-1*d+i+s*2),{x:a?u:d,y:a?d:u}}function Ut(t,n){var r=n.hsv,e=n.rgb;switch(t.sliderType){case"red":return[[0,"rgb(0,"+e.g+","+e.b+")"],[100,"rgb(255,"+e.g+","+e.b+")"]];case"green":return[[0,"rgb("+e.r+",0,"+e.b+")"],[100,"rgb("+e.r+",255,"+e.b+")"]];case"blue":return[[0,"rgb("+e.r+","+e.g+",0)"],[100,"rgb("+e.r+","+e.g+",255)"]];case"alpha":return[[0,"rgba("+e.r+","+e.g+","+e.b+",0)"],[100,"rgb("+e.r+","+e.g+","+e.b+")"]];case"kelvin":for(var o=[],i=t.minTemperature,s=t.maxTemperature,a=8,c=s-i,u=i,d=0;u<s;u+=c/a,d+=1){var l=K.kelvinToRgb(u),f=l.r,h=l.g,g=l.b;o.push([100/a*d,"rgb("+f+","+h+","+g+")"])}return o;case"hue":return[[0,"#f00"],[16.666,"#ff0"],[33.333,"#0f0"],[50,"#0ff"],[66.666,"#00f"],[83.333,"#f0f"],[100,"#f00"]];case"saturation":var b=K.hsvToHsl({h:r.h,s:0,v:r.v}),w=K.hsvToHsl({h:r.h,s:100,v:r.v});return[[0,"hsl("+b.h+","+b.s+"%,"+b.l+"%)"],[100,"hsl("+w.h+","+w.s+"%,"+w.l+"%)"]];case"value":default:var k=K.hsvToHsl({h:r.h,s:r.s,v:100});return[[0,"#000"],[100,"hsl("+k.h+","+k.s+"%,"+k.l+"%)"]]}}var Ke=Math.PI*2,Wt=function(n,r){return(n%r+r)%r},Ye=function(n,r){return Math.sqrt(n*n+r*r)};function Je(t){return t.width/2-t.padding-t.handleRadius-t.borderWidth}function zt(t,n,r){var e=fe(t),o=e.cx,i=e.cy,s=t.width/2;return Ye(o-n,i-r)<s}function fe(t){var n=t.width/2;return{width:t.width,radius:n-t.borderWidth,cx:n,cy:n}}function Qe(t,n,r){var e=t.wheelAngle,o=t.wheelDirection;return r&&o==="clockwise"?n=e+n:o==="clockwise"?n=360-e+n:r&&o==="anticlockwise"?n=e+180-n:o==="anticlockwise"&&(n=e-n),Wt(n,360)}function jt(t,n){var r=n.hsv,e=fe(t),o=e.cx,i=e.cy,s=Je(t),a=(180+Qe(t,r.h,!0))*(Ke/360),c=r.s/100*s,u=t.wheelDirection==="clockwise"?-1:1;return{x:o+c*Math.cos(a)*u,y:i+c*Math.sin(a)*u}}function Ne(t,n,r){var e=fe(t),o=e.cx,i=e.cy,s=Je(t);n=o-n,r=i-r;var a=Qe(t,Math.atan2(-r,-n)*(360/Ke)),c=Math.min(Ye(n,r),s);return{h:Math.round(a),s:Math.round(100/s*c)}}function Pe(t){var n=t.width,r=t.boxHeight,e=t.padding,o=t.handleRadius;return{width:n,height:r??n,radius:e+o}}function De(t,n,r){var e=Pe(t),o=e.width,i=e.height,s=e.radius,a=s,c=o-s*2,u=i-s*2,d=(n-a)/c*100,l=(r-a)/u*100;return{s:Math.max(0,Math.min(d,100)),v:Math.max(0,Math.min(100-l,100))}}function Gt(t,n){var r=Pe(t),e=r.width,o=r.height,i=r.radius,s=n.hsv,a=i,c=e-i*2,u=o-i*2;return{x:a+s.s/100*c,y:a+(u-s.v/100*u)}}function Vt(t,n){var r=n.hue;return[[[0,"#fff"],[100,"hsl("+r+",100%,50%)"]],[[0,"rgba(0,0,0,0)"],[100,"#000"]]]}var _e;function Xt(t){_e||(_e=document.getElementsByTagName("base"));var n=window.navigator.userAgent,r=/^((?!chrome|android).)*safari/i.test(n),e=/iPhone|iPod|iPad/i.test(n),o=window.location;return(r||e)&&_e.length>0?o.protocol+"//"+o.host+o.pathname+o.search+t:t}function et(t,n,r,e){for(var o=0;o<e.length;o++){var i=e[o].x-n,s=e[o].y-r,a=Math.sqrt(i*i+s*s);if(a<t.handleRadius)return o}return null}function Ae(t){return{boxSizing:"border-box",border:t.borderWidth+"px solid "+t.borderColor}}function xe(t,n,r){return t+"-gradient("+n+", "+r.map(function(e){var o=e[0],i=e[1];return i+" "+o+"%"}).join(",")+")"}function E(t){return typeof t=="string"?t:t+"px"}var Zt={width:300,height:300,color:"#fff",colors:[],padding:6,layoutDirection:"vertical",borderColor:"#fff",borderWidth:0,handleRadius:8,activeHandleRadius:null,handleSvg:null,handleProps:{x:0,y:0},wheelLightness:!0,wheelAngle:0,wheelDirection:"anticlockwise",sliderSize:null,sliderMargin:12,boxHeight:null},Be=["mousemove","touchmove","mouseup","touchend"],ve=function(t){function n(r){t.call(this,r),this.uid=(Math.random()+1).toString(36).substring(5)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.render=function(e){var o=this.handleEvent.bind(this),i={onMouseDown:o,ontouchstart:o},s=e.layoutDirection==="horizontal",a=e.margin===null?e.sliderMargin:e.margin,c={overflow:"visible",display:s?"inline-block":"block"};return e.index>0&&(c[s?"marginLeft":"marginTop"]=a),m(de,null,e.children(this.uid,i,c))},n.prototype.handleEvent=function(e){var o=this,i=this.props.onInput,s=this.base.getBoundingClientRect();e.preventDefault();var a=e.touches?e.changedTouches[0]:e,c=a.clientX-s.left,u=a.clientY-s.top;switch(e.type){case"mousedown":case"touchstart":var d=i(c,u,0);d!==!1&&Be.forEach(function(l){document.addEventListener(l,o,{passive:!1})});break;case"mousemove":case"touchmove":i(c,u,1);break;case"mouseup":case"touchend":i(c,u,2),Be.forEach(function(l){document.removeEventListener(l,o,{passive:!1})});break}},n}(Q);function V(t){var n=t.r,r=t.url,e=n,o=n;return m("svg",{className:"IroHandle IroHandle--"+t.index+" "+(t.isActive?"IroHandle--isActive":""),style:{"-webkit-tap-highlight-color":"rgba(0, 0, 0, 0);",transform:"translate("+E(t.x)+", "+E(t.y)+")",willChange:"transform",top:E(-n),left:E(-n),width:E(n*2),height:E(n*2),position:"absolute",overflow:"visible"}},r&&m("use",Object.assign({xlinkHref:Xt(r)},t.props)),!r&&m("circle",{cx:e,cy:o,r:n,fill:"none","stroke-width":2,stroke:"#000"}),!r&&m("circle",{cx:e,cy:o,r:n-2,fill:t.fill,"stroke-width":2,stroke:"#fff"}))}V.defaultProps={fill:"none",x:0,y:0,r:8,url:null,props:{x:0,y:0}};function ce(t){var n=t.activeIndex,r=n!==void 0&&n<t.colors.length?t.colors[n]:t.color,e=Te(t),o=e.width,i=e.height,s=e.radius,a=Lt(t,r),c=Ut(t,r);function u(d,l,f){var h=Bt(t,d,l);t.parent.inputActive=!0,r[t.sliderType]=h,t.onInput(f,t.id)}return m(ve,Object.assign({},t,{onInput:u}),function(d,l,f){return m("div",Object.assign({},l,{className:"IroSlider",style:Object.assign({},{position:"relative",width:E(o),height:E(i),borderRadius:E(s),background:"conic-gradient(#ccc 25%, #fff 0 50%, #ccc 0 75%, #fff 0)",backgroundSize:"8px 8px"},f)}),m("div",{className:"IroSliderGradient",style:Object.assign({},{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:E(s),background:xe("linear",t.layoutDirection==="horizontal"?"to top":"to right",c)},Ae(t))}),m(V,{isActive:!0,index:r.index,r:t.handleRadius,url:t.handleSvg,props:t.handleProps,x:a.x,y:a.y}))})}ce.defaultProps=Object.assign({},Nt);function qt(t){var n=Pe(t),r=n.width,e=n.height,o=n.radius,i=t.colors,s=t.parent,a=t.activeIndex,c=a!==void 0&&a<t.colors.length?t.colors[a]:t.color,u=Vt(t,c),d=i.map(function(f){return Gt(t,f)});function l(f,h,g){if(g===0){var b=et(t,f,h,d);b!==null?s.setActiveColor(b):(s.inputActive=!0,c.hsv=De(t,f,h),t.onInput(g,t.id))}else g===1&&(s.inputActive=!0,c.hsv=De(t,f,h));t.onInput(g,t.id)}return m(ve,Object.assign({},t,{onInput:l}),function(f,h,g){return m("div",Object.assign({},h,{className:"IroBox",style:Object.assign({},{width:E(r),height:E(e),position:"relative"},g)}),m("div",{className:"IroBox",style:Object.assign({},{width:"100%",height:"100%",borderRadius:E(o)},Ae(t),{background:xe("linear","to bottom",u[1])+","+xe("linear","to right",u[0])})}),i.filter(function(b){return b!==c}).map(function(b){return m(V,{isActive:!1,index:b.index,fill:b.hslString,r:t.handleRadius,url:t.handleSvg,props:t.handleProps,x:d[b.index].x,y:d[b.index].y})}),m(V,{isActive:!0,index:c.index,fill:c.hslString,r:t.activeHandleRadius||t.handleRadius,url:t.handleSvg,props:t.handleProps,x:d[c.index].x,y:d[c.index].y}))})}var Kt="conic-gradient(red, yellow, lime, aqua, blue, magenta, red)",Yt="conic-gradient(red, magenta, blue, aqua, lime, yellow, red)";function tt(t){var n=fe(t),r=n.width,e=t.colors;t.borderWidth;var o=t.parent,i=t.color,s=i.hsv,a=e.map(function(d){return jt(t,d)}),c={position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",boxSizing:"border-box"};function u(d,l,f){if(f===0){if(!zt(t,d,l))return!1;var h=et(t,d,l,a);h!==null?o.setActiveColor(h):(o.inputActive=!0,i.hsv=Ne(t,d,l),t.onInput(f,t.id))}else f===1&&(o.inputActive=!0,i.hsv=Ne(t,d,l));t.onInput(f,t.id)}return m(ve,Object.assign({},t,{onInput:u}),function(d,l,f){return m("div",Object.assign({},l,{className:"IroWheel",style:Object.assign({},{width:E(r),height:E(r),position:"relative"},f)}),m("div",{className:"IroWheelHue",style:Object.assign({},c,{transform:"rotateZ("+(t.wheelAngle+90)+"deg)",background:t.wheelDirection==="clockwise"?Kt:Yt})}),m("div",{className:"IroWheelSaturation",style:Object.assign({},c,{background:"radial-gradient(circle closest-side, #fff, transparent)"})}),t.wheelLightness&&m("div",{className:"IroWheelLightness",style:Object.assign({},c,{background:"#000",opacity:1-s.v/100})}),m("div",{className:"IroWheelBorder",style:Object.assign({},c,Ae(t))}),e.filter(function(h){return h!==i}).map(function(h){return m(V,{isActive:!1,index:h.index,fill:h.hslString,r:t.handleRadius,url:t.handleSvg,props:t.handleProps,x:a[h.index].x,y:a[h.index].y})}),m(V,{isActive:!0,index:i.index,fill:i.hslString,r:t.activeHandleRadius||t.handleRadius,url:t.handleSvg,props:t.handleProps,x:a[i.index].x,y:a[i.index].y}))})}function Jt(t){var n=function(r,e){var o,i=document.createElement("div");wt(m(t,Object.assign({},{ref:function(a){return o=a}},e)),i);function s(){var a=r instanceof Element?r:document.querySelector(r);a.appendChild(o.base),o.onMount(a)}return document.readyState!=="loading"?s():document.addEventListener("DOMContentLoaded",s),o};return n.prototype=t.prototype,Object.assign(n,t),n.__component=t,n}var nt=function(t){function n(r){var e=this;t.call(this,r),this.colors=[],this.inputActive=!1,this.events={},this.activeEvents={},this.deferredEvents={},this.id=r.id;var o=r.colors.length>0?r.colors:[r.color];o.forEach(function(i){return e.addColor(i)}),this.setActiveColor(0),this.state=Object.assign({},r,{color:this.color,colors:this.colors,layout:r.layout})}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.addColor=function(e,o){o===void 0&&(o=this.colors.length);var i=new K(e,this.onColorChange.bind(this));this.colors.splice(o,0,i),this.colors.forEach(function(s,a){return s.index=a}),this.state&&this.setState({colors:this.colors}),this.deferredEmit("color:init",i)},n.prototype.removeColor=function(e){var o=this.colors.splice(e,1)[0];o.unbind(),this.colors.forEach(function(i,s){return i.index=s}),this.state&&this.setState({colors:this.colors}),o.index===this.color.index&&this.setActiveColor(0),this.emit("color:remove",o)},n.prototype.setActiveColor=function(e){this.color=this.colors[e],this.state&&this.setState({color:this.color}),this.emit("color:setActive",this.color)},n.prototype.setColors=function(e,o){var i=this;o===void 0&&(o=0),this.colors.forEach(function(s){return s.unbind()}),this.colors=[],e.forEach(function(s){return i.addColor(s)}),this.setActiveColor(o),this.emit("color:setAll",this.colors)},n.prototype.on=function(e,o){var i=this,s=this.events;(Array.isArray(e)?e:[e]).forEach(function(a){(s[a]||(s[a]=[])).push(o),i.deferredEvents[a]&&(i.deferredEvents[a].forEach(function(c){o.apply(null,c)}),i.deferredEvents[a]=[])})},n.prototype.off=function(e,o){var i=this;(Array.isArray(e)?e:[e]).forEach(function(s){var a=i.events[s];a&&a.splice(a.indexOf(o),1)})},n.prototype.emit=function(e){for(var o=this,i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];var a=this.activeEvents,c=a.hasOwnProperty(e)?a[e]:!1;if(!c){a[e]=!0;var u=this.events[e]||[];u.forEach(function(d){return d.apply(o,i)}),a[e]=!1}},n.prototype.deferredEmit=function(e){for(var o,i=[],s=arguments.length-1;s-- >0;)i[s]=arguments[s+1];var a=this.deferredEvents;(o=this).emit.apply(o,[e].concat(i)),(a[e]||(a[e]=[])).push(i)},n.prototype.setOptions=function(e){this.setState(e)},n.prototype.resize=function(e){this.setOptions({width:e})},n.prototype.reset=function(){this.colors.forEach(function(e){return e.reset()}),this.setState({colors:this.colors})},n.prototype.onMount=function(e){this.el=e,this.deferredEmit("mount",this)},n.prototype.onColorChange=function(e,o){this.setState({color:this.color}),this.inputActive&&(this.inputActive=!1,this.emit("input:change",e,o)),this.emit("color:change",e,o)},n.prototype.emitInputEvent=function(e,o){e===0?this.emit("input:start",this.color,o):e===1?this.emit("input:move",this.color,o):e===2&&this.emit("input:end",this.color,o)},n.prototype.render=function(e,o){var i=this,s=o.layout;if(!Array.isArray(s)){switch(s){default:s=[{component:tt},{component:ce}]}o.transparency&&s.push({component:ce,options:{sliderType:"alpha"}})}return m("div",{class:"IroColorPicker",id:o.id,style:{display:o.display}},s.map(function(a,c){var u=a.component,d=a.options;return m(u,Object.assign({},o,d,{ref:void 0,onInput:i.emitInputEvent.bind(i),parent:i,index:c}))}))},n}(Q);nt.defaultProps=Object.assign({},Zt,{colors:[],display:"block",id:null,layout:"default",margin:null});var Qt=Jt(nt),we;(function(t){t.version="5.5.2",t.Color=K,t.ColorPicker=Qt,function(n){n.h=m,n.ComponentBase=ve,n.Handle=V,n.Slider=ce,n.Wheel=tt,n.Box=qt}(t.ui||(t.ui={}))})(we||(we={}));var be=we;const en={class:"color-wheel-wrapper flex flex-col items-center gap-3"},tn={class:"wheel-container relative"},nn={class:"flex items-center gap-2"},rn={class:"text-sm font-mono font-bold text-cyan tracking-wider"},on=O({__name:"ColorWheel",setup(t){const n=X(),r=ee(),{sendStream:e}=ue(),o=F(null);let i=null;const s=F(window.innerWidth<768?160:220),a=D(()=>s.value<200?100:140);function c(){s.value=window.innerWidth<768?160:220}const u=D(()=>({r:n.red*17,g:n.green*17,b:n.blue*17})),d=D(()=>`#${n.red.toString(16).toUpperCase()}${n.green.toString(16).toUpperCase()}${n.blue.toString(16).toUpperCase()}`);let l=null;function f(){r.isConnected&&(n.syncToSelected(),l&&clearTimeout(l),l=setTimeout(()=>e(),50))}function h(b){return Math.round(b/17)}function g(){o.value&&(i&&(o.value.innerHTML="",i=null),i=new be.ColorPicker(o.value,{width:s.value,color:`rgb(${u.value.r}, ${u.value.g}, ${u.value.b})`,layout:[{component:be.ui.Wheel,options:{wheelAngle:0,wheelDirection:"anticlockwise"}},{component:be.ui.Box,options:{boxHeight:a.value}}],layoutDirection:"horizontal",borderWidth:2,borderColor:"#333",handleRadius:10,handleSvg:null,handleProps:{x:0,y:0}}),i.on("color:change",b=>{const{r:w,g:k,b:p}=b.rgb,M=h(w),T=h(k),oe=h(p);(n.red!==M||n.green!==T||n.blue!==oe)&&(n.setRGB(M,T,oe),f())}))}return it(()=>{g(),window.addEventListener("resize",c)}),Me(s,()=>{g()}),Me(()=>[n.red,n.green,n.blue],()=>{if(i){const b=i.color.rgb,w=n.red*17,k=n.green*17,p=n.blue*17;(Math.abs(b.r-w)>17||Math.abs(b.g-k)>17||Math.abs(b.b-p)>17)&&(i.color.rgb={r:w,g:k,b:p})}}),Ce(()=>{window.removeEventListener("resize",c),i=null}),(b,w)=>(y(),x("div",en,[v("div",tn,[v("div",{ref_key:"wheelContainer",ref:o,class:"color-picker-mount"},null,512),v("div",{class:"absolute -top-1 -right-1 w-8 h-8 rounded-full border-2 border-gray-700 shadow-lg",style:A({backgroundColor:`rgb(${u.value.r}, ${u.value.g}, ${u.value.b})`,boxShadow:`0 0 15px rgba(${u.value.r}, ${u.value.g}, ${u.value.b}, 0.5)`})},null,4)]),v("div",nn,[w[0]||(w[0]=v("span",{class:"text-xs font-mono text-gray-500"},"RAW:",-1)),v("span",rn,H(d.value),1)])]))}}),sn=re(on,[["__scopeId","data-v-84e31274"]]),an={class:"channel-faders bg-gray-900/60 rounded-lg p-3 border border-gray-700/50 space-y-2.5"},ln={class:"flex items-center gap-3"},cn={class:"flex-1 relative h-5"},un=["value","disabled"],dn={class:"font-mono text-red-400 w-5 text-right text-sm font-bold"},hn={class:"flex items-center gap-3"},fn={class:"flex-1 relative h-5"},vn=["value","disabled"],gn={class:"font-mono text-green-400 w-5 text-right text-sm font-bold"},_n={class:"flex items-center gap-3"},bn={class:"flex-1 relative h-5"},mn=["value","disabled"],pn={class:"font-mono text-blue-400 w-5 text-right text-sm font-bold"},yn=O({__name:"ChannelFaders",setup(t){const n=X(),r=ee(),{sendStream:e}=ue();let o=null;function i(){r.isConnected&&(n.syncToSelected(),o&&clearTimeout(o),o=setTimeout(()=>e(),50))}function s(f){const h=parseInt(f.target.value,10);n.setRed(h),i()}function a(f){const h=parseInt(f.target.value,10);n.setGreen(h),i()}function c(f){const h=parseInt(f.target.value,10);n.setBlue(h),i()}const u=D(()=>n.red/15*100),d=D(()=>n.green/15*100),l=D(()=>n.blue/15*100);return(f,h)=>(y(),x("div",an,[v("div",ln,[h[1]||(h[1]=v("span",{class:"text-red-500 font-bold w-5 text-sm text-center"},"R",-1)),v("div",cn,[h[0]||(h[0]=v("div",{class:"absolute inset-0 rounded-full overflow-hidden",style:{background:"linear-gradient(to right, #000 0%, #ff0000 100%)"}},null,-1)),v("div",{class:"absolute inset-y-0 left-0 rounded-l-full bg-red-500/30",style:A({width:`${u.value}%`})},null,4),v("input",{type:"range",min:"0",max:"15",value:_(n).red,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:!_(r).isConnected,onInput:s},null,40,un),v("div",{class:"absolute top-1/2 -translate-y-1/2 w-4 h-4 bg-white rounded-full shadow-lg border-2 border-red-500 transition-all pointer-events-none",style:A({left:`calc(${u.value}% - 8px)`})},null,4)]),v("span",dn,H(_(n).red.toString(16).toUpperCase()),1)]),v("div",hn,[h[3]||(h[3]=v("span",{class:"text-green-500 font-bold w-5 text-sm text-center"},"G",-1)),v("div",fn,[h[2]||(h[2]=v("div",{class:"absolute inset-0 rounded-full overflow-hidden",style:{background:"linear-gradient(to right, #000 0%, #00ff00 100%)"}},null,-1)),v("div",{class:"absolute inset-y-0 left-0 rounded-l-full bg-green-500/30",style:A({width:`${d.value}%`})},null,4),v("input",{type:"range",min:"0",max:"15",value:_(n).green,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:!_(r).isConnected,onInput:a},null,40,vn),v("div",{class:"absolute top-1/2 -translate-y-1/2 w-4 h-4 bg-white rounded-full shadow-lg border-2 border-green-500 transition-all pointer-events-none",style:A({left:`calc(${d.value}% - 8px)`})},null,4)]),v("span",gn,H(_(n).green.toString(16).toUpperCase()),1)]),v("div",_n,[h[5]||(h[5]=v("span",{class:"text-blue-500 font-bold w-5 text-sm text-center"},"B",-1)),v("div",bn,[h[4]||(h[4]=v("div",{class:"absolute inset-0 rounded-full overflow-hidden",style:{background:"linear-gradient(to right, #000 0%, #0000ff 100%)"}},null,-1)),v("div",{class:"absolute inset-y-0 left-0 rounded-l-full bg-blue-500/30",style:A({width:`${l.value}%`})},null,4),v("input",{type:"range",min:"0",max:"15",value:_(n).blue,class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:!_(r).isConnected,onInput:c},null,40,mn),v("div",{class:"absolute top-1/2 -translate-y-1/2 w-4 h-4 bg-white rounded-full shadow-lg border-2 border-blue-500 transition-all pointer-events-none",style:A({left:`calc(${l.value}% - 8px)`})},null,4)]),v("span",pn,H(_(n).blue.toString(16).toUpperCase()),1)])]))}}),xn=[{index:0,name:"Red",hex:"#FF0000",r:15,g:0,b:0},{index:1,name:"Green",hex:"#00FF00",r:0,g:15,b:0},{index:2,name:"Blue",hex:"#0000FF",r:0,g:0,b:15},{index:3,name:"Pink",hex:"#FF00FF",r:15,g:0,b:15},{index:4,name:"White",hex:"#FFFFFF",r:15,g:15,b:15},{index:5,name:"Yellow",hex:"#FFFF00",r:15,g:15,b:0},{index:6,name:"Light Blue",hex:"#00FFFF",r:0,g:15,b:15},{index:7,name:"Light Green",hex:"#80FF80",r:8,g:15,b:8},{index:8,name:"Purple",hex:"#800080",r:8,g:0,b:15},{index:9,name:"Orange",hex:"#FFA500",r:15,g:8,b:0},{index:10,name:"Light Pink",hex:"#FFB6C1",r:15,g:8,b:12},{index:11,name:"Medium Blue",hex:"#0000CD",r:0,g:8,b:15},{index:12,name:"Light Yellow",hex:"#FFFFE0",r:15,g:15,b:8},{index:13,name:"Medium Green",hex:"#3CB371",r:4,g:15,b:8},{index:14,name:"Light Red",hex:"#FFCCCB",r:15,g:8,b:8},{index:15,name:"Bright White",hex:"#F0F8FF",r:15,g:15,b:15}],wn={class:"swatch-book space-y-3"},kn={class:"grid grid-cols-8 gap-1"},Sn=["title","disabled","onClick"],Cn={class:"flex items-center justify-between mb-1.5"},En=["disabled"],$n={class:"grid grid-cols-8 gap-1"},In=["disabled","onClick","onContextmenu"],Rn=O({__name:"SwatchBook",setup(t){const n=X(),r=ee(),{sendStream:e,sendZonePreset:o}=ue();function i(f){if(n.setActivePresetColor(f.index),r.isConnected){o(f.index);const h=n.autoSend;n.autoSend=!1,n.setRGB(f.r,f.g,f.b),n.syncToSelected(),n.autoSend=h}else n.setRGB(f.r,f.g,f.b)}const s=F([]),a=localStorage.getItem("lumaflow-user-colors");if(a)try{s.value=JSON.parse(a)}catch{s.value=[]}function c(f){n.setRGB(f.r,f.g,f.b),r.isConnected&&(n.syncToSelected(),e())}function u(){s.value.length>=8&&s.value.shift(),s.value.push({r:n.red,g:n.green,b:n.blue}),localStorage.setItem("lumaflow-user-colors",JSON.stringify(s.value))}function d(f){s.value.splice(f,1),localStorage.setItem("lumaflow-user-colors",JSON.stringify(s.value))}function l(f){return n.red===f.r&&n.green===f.g&&n.blue===f.b}return(f,h)=>(y(),x("div",wn,[v("div",null,[h[0]||(h[0]=v("div",{class:"text-xs font-mono text-gray-500 uppercase tracking-wider mb-1.5"}," Presets ",-1)),v("div",kn,[(y(!0),x(Y,null,J(_(xn),g=>(y(),x("button",{key:g.index,class:L(["swatch aspect-square rounded border transition-all",[_(n).activePresetColor===g.index?"border-cyan scale-110 shadow-[0_0_6px_rgba(0,229,255,0.5)] z-10 relative":"border-gray-700 hover:border-gray-500 hover:scale-105"]]),style:A({backgroundColor:_(me)(g.r,g.g,g.b)}),title:`${g.name} (Index: ${g.index})`,disabled:!_(r).isConnected,onClick:b=>i(g)},null,14,Sn))),128))])]),v("div",null,[v("div",Cn,[h[1]||(h[1]=v("div",{class:"text-xs font-mono text-gray-500 uppercase tracking-wider"}," Saved ",-1)),v("button",{class:"w-5 h-5 rounded border border-gray-700 text-gray-400 hover:border-cyan hover:text-cyan transition-colors text-xs flex items-center justify-center",disabled:!_(r).isConnected,onClick:u,title:"Save current color"}," + ",8,En)]),v("div",$n,[(y(!0),x(Y,null,J(s.value,(g,b)=>(y(),x("button",{key:b,class:L(["swatch aspect-square rounded border transition-all group relative",[l(g)?"border-purple scale-110 shadow-[0_0_6px_rgba(213,0,249,0.5)] z-10":"border-gray-700 hover:border-gray-500 hover:scale-105"]]),style:A({backgroundColor:_(me)(g.r,g.g,g.b)}),disabled:!_(r).isConnected,onClick:w=>c(g),onContextmenu:Ee(w=>d(b),["prevent"])},[...h[2]||(h[2]=[v("div",{class:"absolute inset-0 bg-red/80 opacity-0 group-hover:opacity-100 transition-opacity rounded flex items-center justify-center text-[10px] text-white pointer-events-none"}," Ã— ",-1)])],46,In))),128)),(y(!0),x(Y,null,J(Math.max(0,8-s.value.length),g=>(y(),x("div",{key:`empty-${g}`,class:"aspect-square rounded border border-gray-800 border-dashed"}))),128))]),h[3]||(h[3]=v("div",{class:"text-[10px] text-gray-600 mt-1"}," Right-click to delete ",-1))])]))}}),Tn=re(Rn,[["__scopeId","data-v-799ca48b"]]),Pn={class:"mode-selector"},An={class:"grid grid-cols-4 gap-1.5"},Mn=["disabled","onClick"],Fn={class:"font-bold text-sm"},On={class:"text-[10px] opacity-50"},Hn=O({__name:"ModeSelector",setup(t){const n=X(),r=ee(),{sendStream:e}=ue(),o=[{value:ie.SOLID,label:"OFF",desc:"Solid"},{value:ie.STROBE_1HZ,label:"1Hz",desc:"Slow"},{value:ie.STROBE_2HZ,label:"2Hz",desc:"Med"},{value:ie.STROBE_4HZ,label:"4Hz",desc:"Fast"}];function i(s){n.setMode(s),r.isConnected&&(n.syncToSelected(),e())}return(s,a)=>(y(),x("div",Pn,[v("div",An,[(y(),x(Y,null,J(o,c=>v("button",{key:c.value,class:L(["py-2.5 px-1 rounded text-xs font-mono transition-all border flex flex-col items-center gap-0.5",[_(n).mode===c.value?"bg-purple/20 border-purple text-purple shadow-[0_0_10px_rgba(213,0,249,0.3)]":"bg-gray-800/50 border-gray-700 text-gray-400 hover:border-gray-500 hover:text-gray-300"]]),disabled:!_(r).isConnected,onClick:u=>i(c.value)},[v("div",Fn,H(c.label),1),v("div",On,H(c.desc),1)],10,Mn)),64))])]))}}),Nn=["disabled"],Dn={key:0,class:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{background:"radial-gradient(circle at center, rgba(0,229,255,0.1) 0%, transparent 70%)"}},Bn={class:"relative z-10 flex flex-col items-center justify-center gap-1 h-full py-4"},Ln=O({__name:"PulseButton",setup(t){const n=ee(),r=X(),e=F(!1);async function o(){if(n.isConnected){e.value=!0;try{await W.sendPulse(r.activePresetColor)}catch(i){console.error("Pulse failed:",i)}setTimeout(()=>{e.value=!1},150)}}return(i,s)=>(y(),x("button",{class:L(["pulse-button w-full h-full relative overflow-hidden rounded-xl border-2 transition-all duration-75 group",[e.value?"bg-cyan border-cyan text-black scale-[0.98]":"bg-gray-800/50 border-cyan/50 text-cyan hover:bg-cyan/10 hover:border-cyan hover:shadow-[0_0_30px_rgba(0,229,255,0.15)]",{"opacity-40 grayscale cursor-not-allowed":!_(n).isConnected}]]),disabled:!_(n).isConnected,onMousedown:o,onTouchstart:Ee(o,["prevent"])},[e.value?Se("",!0):(y(),x("div",Dn)),v("div",Bn,[(y(),x("svg",{class:L(["w-10 h-10 transition-transform duration-75",{"scale-110":e.value}]),viewBox:"0 0 24 24",fill:"currentColor"},[...s[0]||(s[0]=[v("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"},null,-1)])],2)),s[1]||(s[1]=v("span",{class:"text-xl font-black tracking-[0.15em]"}," FLASH ",-1)),s[2]||(s[2]=v("span",{class:"text-xs font-mono opacity-50"}," TAP TO STROBE ",-1))])],42,Nn))}}),Un=re(Ln,[["__scopeId","data-v-4c6e73a9"]]),Wn={class:"unlock-slider"},zn={class:"absolute inset-0 flex items-center justify-center text-xs font-mono"},jn={key:0,class:"text-green-500"},Gn={key:1,class:"text-red"},Vn={key:2,class:"text-gray-500"},Xn=O({__name:"UnlockSlider",setup(t){const{isHolding:n,progress:r,isUnlocked:e,startUnlock:o,stopUnlock:i}=gt();return(s,a)=>(y(),x("div",Wn,[a[5]||(a[5]=v("div",{class:"text-xs font-mono text-gray-500 uppercase tracking-wider mb-1.5"}," Safety Unlock ",-1)),v("div",{class:L(["relative h-10 rounded-lg border-2 overflow-hidden cursor-pointer select-none transition-all",[_(e)?"border-green-500 bg-green-500/10":_(n)?"border-red bg-red/5":"border-gray-700 bg-gray-800/30 hover:border-gray-600"]]),onMousedown:a[0]||(a[0]=(...c)=>_(o)&&_(o)(...c)),onMouseup:a[1]||(a[1]=(...c)=>_(i)&&_(i)(...c)),onMouseleave:a[2]||(a[2]=(...c)=>_(i)&&_(i)(...c)),onTouchstart:a[3]||(a[3]=Ee((...c)=>_(o)&&_(o)(...c),["prevent"])),onTouchend:a[4]||(a[4]=(...c)=>_(i)&&_(i)(...c))},[_(e)?Se("",!0):(y(),x("div",{key:0,class:"absolute inset-y-0 left-0 bg-red/40 transition-all duration-100",style:A({width:`${_(r)*100}%`})},null,4)),v("div",zn,[_(e)?(y(),x("span",jn,"UNLOCKED")):_(n)?(y(),x("span",Gn,"HOLD "+H(Math.ceil((1-_(r))*3))+"s",1)):(y(),x("span",Vn,"HOLD 3s TO UNLOCK"))])],34)]))}}),Zn={class:"live-console grid grid-cols-1 md:grid-cols-[260px_1fr_280px] gap-3 md:gap-4 md:h-full p-3 md:p-4 bg-cyber-bg overflow-auto md:overflow-hidden"},qn={class:"flex flex-col gap-3 md:h-full md:min-h-0"},Kn={class:"flex-1 overflow-y-auto custom-scrollbar pr-1"},Yn={class:"mt-3 pt-3 border-t border-gray-700"},Jn={class:"flex-1 flex flex-col justify-center items-center gap-4 p-4 min-h-0"},Qn={class:"flex-shrink-0"},er={class:"w-full max-w-md"},tr={class:"absolute bottom-4 right-4 flex flex-col items-center gap-1"},nr={class:"flex flex-col gap-3 md:h-full md:overflow-y-auto custom-scrollbar md:min-h-0"},rr={class:"flex-1 min-h-[120px]"},or=O({__name:"LiveConsole",setup(t){const n=X(),r=D(()=>({r:n.red*17,g:n.green*17,b:n.blue*17}));return(e,o)=>(y(),x("div",Zn,[v("div",qn,[C(_(te),{title:"ZONES",class:"flex-1 flex flex-col min-h-0"},{default:q(()=>[v("div",Kn,[C(ht)]),v("div",Yn,[C(vt)])]),_:1})]),C(_(te),{title:"COLOR MIXING",class:"md:h-full flex flex-col relative overflow-hidden md:min-h-0"},{default:q(()=>[o[1]||(o[1]=v("div",{class:"absolute inset-0 opacity-5 pointer-events-none"},[v("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"},[v("defs",null,[v("pattern",{id:"grid",width:"40",height:"40",patternUnits:"userSpaceOnUse"},[v("path",{d:"M 40 0 L 0 0 0 40",fill:"none",stroke:"currentColor","stroke-width":"0.5"})])]),v("rect",{width:"100%",height:"100%",fill:"url(#grid)"})])],-1)),v("div",Jn,[v("div",Qn,[C(sn)]),v("div",er,[C(yn)])]),v("div",tr,[v("div",{class:"w-16 h-16 rounded-lg border-2 border-gray-700 shadow-lg transition-colors duration-75",style:A({backgroundColor:`rgb(${r.value.r}, ${r.value.g}, ${r.value.b})`,boxShadow:_(n).red>0||_(n).green>0||_(n).blue>0?`0 0 25px rgba(${r.value.r}, ${r.value.g}, ${r.value.b}, 0.4)`:"none"})},null,4),o[0]||(o[0]=v("div",{class:"text-[10px] font-mono text-gray-500"}," OUTPUT ",-1))])]),_:1}),v("div",nr,[C(_(te),{title:"SWATCHES"},{default:q(()=>[C(Tn)]),_:1}),C(_(te),{title:"STROBE"},{default:q(()=>[C(Hn)]),_:1}),v("div",rr,[C(Un)]),C(_(te),{padding:"sm"},{default:q(()=>[C(Xn)]),_:1})])]))}}),ir=re(or,[["__scopeId","data-v-b41cdd8d"]]),sr={class:"live-view h-full overflow-auto"},cr=O({__name:"LiveView",setup(t){return(n,r)=>(y(),x("div",sr,[C(_(ir))]))}});export{cr as default};
